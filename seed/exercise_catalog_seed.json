{
  "attributes": [
    { "key": "equipment", "type": "enum", "values": ["barbell","dumbbells","machine","cable","smith_machine","kettlebell","bodyweight","band"] },
    { "key": "bench_angle", "type": "enum", "values": ["flat","incline","decline"] },
    { "key": "grip_type", "type": "enum", "values": ["pronated","supinated","neutral","mixed"] },
    { "key": "grip_width", "type": "enum", "values": ["narrow","standard","wide"] },
    { "key": "stance", "type": "enum", "values": ["standard","sumo","split","front_rack"] },
    { "key": "unilateral", "type": "boolean" },
    { "key": "body_angle", "type": "enum", "values": ["seated","standing","bent_over","chest_supported"] },
    { "key": "bar_position", "type": "enum", "values": ["high_bar","low_bar","front"] },
    { "key": "range_of_motion", "type": "enum", "values": ["full","partial"] },
    { "key": "tempo", "type": "enum", "values": ["2-0-2","3-1-3","explosive","slow_controlled"] },
    { "key": "cable_attachment", "type": "enum", "values": ["straight_bar","ez_bar","rope","single_handle","v_bar","lat_bar"] },
    { "key": "handle_position", "type": "enum", "values": ["overhead","chest_height","low","hip"] },
    { "key": "hand_orientation", "type": "enum", "values": ["pronated","supinated","neutral"] }
  ],

  "archetypes": [
    { "key": "bench_press", "primary_muscle": "chest", "secondary_muscles": ["triceps","front_delts"], "allowed_attributes": ["equipment","bench_angle","grip_type","grip_width","tempo","range_of_motion","unilateral"] },
    { "key": "overhead_press", "primary_muscle": "shoulders", "secondary_muscles": ["triceps","upper_chest"], "allowed_attributes": ["equipment","body_angle","grip_type","grip_width","tempo","unilateral","range_of_motion"] },
    { "key": "push_up", "primary_muscle": "chest", "secondary_muscles": ["triceps","front_delts","core"], "allowed_attributes": ["grip_width","range_of_motion","tempo","body_angle","unilateral"] },
    { "key": "chest_fly", "primary_muscle": "chest", "secondary_muscles": ["front_delts"], "allowed_attributes": ["equipment","bench_angle","range_of_motion","tempo","unilateral","body_angle","cable_attachment"] },
    { "key": "squat", "primary_muscle": "quads", "secondary_muscles": ["glutes","hamstrings","core"], "allowed_attributes": ["equipment","stance","bar_position","range_of_motion","tempo","body_angle"] },
    { "key": "deadlift", "primary_muscle": "hamstrings", "secondary_muscles": ["glutes","back","core"], "allowed_attributes": ["equipment","stance","grip_type","grip_width","range_of_motion","tempo","body_angle"] },
    { "key": "lunge", "primary_muscle": "quads", "secondary_muscles": ["glutes","hamstrings"], "allowed_attributes": ["equipment","stance","unilateral","body_angle","tempo"] },
    { "key": "hip_thrust", "primary_muscle": "glutes", "secondary_muscles": ["hamstrings","core"], "allowed_attributes": ["equipment","range_of_motion","tempo","body_angle"] },
    { "key": "leg_press", "primary_muscle": "quads", "secondary_muscles": ["glutes","hamstrings"], "allowed_attributes": ["equipment","stance","range_of_motion","tempo"] },
    { "key": "pull_up", "primary_muscle": "lats", "secondary_muscles": ["biceps","rear_delts","core"], "allowed_attributes": ["grip_type","grip_width","range_of_motion","tempo","body_angle"] },
    { "key": "lat_pulldown", "primary_muscle": "lats", "secondary_muscles": ["biceps","rear_delts"], "allowed_attributes": ["equipment","grip_type","grip_width","cable_attachment","range_of_motion","tempo","body_angle"] },
    { "key": "row", "primary_muscle": "mid_back", "secondary_muscles": ["lats","rear_delts","biceps"], "allowed_attributes": ["equipment","body_angle","grip_type","grip_width","range_of_motion","tempo","unilateral","cable_attachment","handle_position"] },
    { "key": "biceps_curl", "primary_muscle": "biceps", "secondary_muscles": ["forearms"], "allowed_attributes": ["equipment","body_angle","grip_type","grip_width","unilateral","range_of_motion","tempo","cable_attachment"] },
    { "key": "triceps_extension", "primary_muscle": "triceps", "secondary_muscles": [], "allowed_attributes": ["equipment","body_angle","cable_attachment","hand_orientation","range_of_motion","tempo","unilateral"] },
    { "key": "lateral_raise", "primary_muscle": "side_delts", "secondary_muscles": [], "allowed_attributes": ["equipment","body_angle","unilateral","range_of_motion","tempo"] },
    { "key": "shrug", "primary_muscle": "traps", "secondary_muscles": ["forearms"], "allowed_attributes": ["equipment","body_angle","unilateral","range_of_motion","tempo","grip_type","grip_width"] },
    { "key": "crunch", "primary_muscle": "abs", "secondary_muscles": [], "allowed_attributes": ["body_angle","tempo","range_of_motion"] },
    { "key": "plank", "primary_muscle": "core", "secondary_muscles": [], "allowed_attributes": ["body_angle","tempo","range_of_motion","unilateral"] },
    { "key": "back_extension", "primary_muscle": "lower_back", "secondary_muscles": ["glutes","hamstrings"], "allowed_attributes": ["body_angle","tempo","range_of_motion","unilateral"] }
  ],

  "rules": [
    { "scope": "global", "target": "grip_width", "if": { "equipment": ["barbell","machine","cable","smith_machine"] }, "allow": { "grip_width": ["narrow","standard","wide"] } },
    { "scope": "global", "target": "grip_width", "if": { "equipment": ["dumbbells","kettlebell","bodyweight","band"] }, "deny": { "grip_width": ["narrow","standard","wide"] } },
    { "scope": "global", "target": "cable_attachment", "if": { "equipment": ["cable"] }, "allow": { "cable_attachment": ["straight_bar","ez_bar","rope","single_handle","v_bar","lat_bar"] } },
    { "scope": "global", "target": "cable_attachment", "if": { "equipment": ["barbell","dumbbells","machine","smith_machine","kettlebell","bodyweight","band"] }, "deny": { "cable_attachment": ["straight_bar","ez_bar","rope","single_handle","v_bar","lat_bar"] } },
    { "scope": "global", "target": "unilateral", "if": { "equipment": ["barbell","smith_machine","machine"] }, "deny": { "unilateral": ["true"] } },
    { "scope": "global", "target": "unilateral", "if": { "equipment": ["dumbbells","kettlebell","cable","band","bodyweight"] }, "allow": { "unilateral": ["true","false"] } },

    { "scope": "archetype", "archetype": "bench_press", "require": ["equipment"] },
    { "scope": "archetype", "archetype": "bench_press", "target": "bench_angle", "allow": { "bench_angle": ["flat","incline","decline"] } },

    { "scope": "archetype", "archetype": "chest_fly", "if": { "equipment": ["dumbbells","machine","cable"] }, "allow": { "bench_angle": ["flat","incline","decline"] } },

    { "scope": "archetype", "archetype": "overhead_press", "target": "body_angle", "allow": { "body_angle": ["standing","seated"] } },

    { "scope": "archetype", "archetype": "squat", "target": "stance", "allow": { "stance": ["standard","sumo"] } },
    { "scope": "archetype", "archetype": "squat", "target": "bar_position", "allow": { "bar_position": ["high_bar","low_bar"] } },

    { "scope": "archetype", "archetype": "deadlift", "target": "stance", "allow": { "stance": ["standard","sumo"] } },
    { "scope": "archetype", "archetype": "deadlift", "target": "grip_type", "allow": { "grip_type": ["pronated","mixed"] } },

    { "scope": "archetype", "archetype": "row", "target": "body_angle", "allow": { "body_angle": ["seated","standing","bent_over","chest_supported"] } },

    { "scope": "archetype", "archetype": "pull_up", "target": "grip_type", "allow": { "grip_type": ["pronated","supinated","neutral"] } }
  ]
}
